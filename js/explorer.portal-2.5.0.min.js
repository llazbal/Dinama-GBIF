EXPLORER.preview=function(){var c={sideBar:"",occPreview:"",closeElement:"",sidebarTop:0,init:function(){this.sideBar=$("#control_wrapper");0<this.sideBar.length&&(this.occPreview=$("#occ_preview"),this.closeElement=$("#preview_close"),this.sidebarTop=this.sideBar.offset().top-36,this.loadEvents())},loadEvents:function(){var a=this;this.initClosePreview();$(window).scroll(function(){$(this).scrollTop()>=a.sidebarTop?a.occPreview.addClass("fixed"):a.occPreview.removeClass("fixed")})},initClosePreview:function(){var a=
this;$("#preview_close").on("click",function(){a.hide()})},hide:function(){this.occPreview.hide("slide",500)},show:function(){$(window).scrollTop()>=this.sidebarTop&&this.occPreview.addClass("fixed");this.occPreview.show("slide",500)},replacePreviewContent:function(a){this.occPreview.html(a);this.initClosePreview()}};return{init:function(){c.init()},replacePreviewContent:function(a){c.replacePreviewContent(a)},hide:function(){c.hide()},show:function(){c.show()}}}();
EXPLORER.control=function(){var c={COOKIE_NAME:"canadensys-responsive-table-settings",init:function(){this.loadEvents()},loadEvents:function(){var a="";$("#control_buttons").on("click","a",function(b){b.preventDefault();EXPLORER.preview.hide();a=$(this).attr("href");$(this).addClass("selected").parent().siblings().children().removeClass("selected");$(a).removeClass("hidden").siblings().addClass("hidden")})},restoreDisplay:function(){var a=this,b=$("#display_columns"),d=b.find("input:checkbox"),c=
$.cookie(this.COOKIE_NAME),f=[];c&&(f=c.split(","),$.each(d,function(){var a=_.include(f,$(this).val());(a&&!$(this).prop("checked")||!a&&$(this).prop("checked"))&&$(this).trigger("click")}));b.on("click","input:checkbox",function(){var b=[];$.each(d,function(){$(this).prop("checked")&&b.push($(this).val())});$.cookie(a.COOKIE_NAME,b,{expires:7})})}};return{init:function(){c.init()},restoreDisplay:function(){c.restoreDisplay()}}}();
EXPLORER.table=function(){var c={results:"",occPreview:"",init:function(){this.results=$("#results");this.occPreview=$("#occ_preview");this.occPreview.length&&this.results.length&&this.loadEvents()},getFragment:function(a){a=EXPLORER.settings.baseUrl+"/"+EXPLORER.settings.locale+"/"+EXPLORER.i18n.getLanguageResource("url.occurrence-preview")+"/"+a;$.get(a,function(a){EXPLORER.preview.replacePreviewContent(a)}).fail(function(a,d,c){console.log(d)})},buildResponse:function(a){this.getFragment(a.attr("id"));
EXPLORER.preview.show();a.addClass("selected");$(".last_column",a).addClass("last_column_hide")},scrollWindow:function(a){$("html,body").animate({scrollTop:a.offset().top+parseInt(a.css("padding-top"),10)},"fast")},loadEvents:function(){var a=this,b;$("tbody tr",this.results).on("click",function(){b&&b===this&&a.occPreview.is(":visible")?(EXPLORER.preview.hide(),$(".last_column",$(this)).removeClass("last_column_hide")):a.buildResponse($(this));b=this}).keynavigator({activeClass:"selected",cycle:!1,
keys:{left_arrow:function(a){EXPLORER.preview.hide();$(".last_column",a).removeClass("last_column_hide")},escape:function(a){EXPLORER.preview.hide();$(".last_column",a).removeClass("last_column_hide")},right_arrow:function(b){a.buildResponse($(b))},enter:function(b){a.buildResponse($(b))}}}).on("down",function(){EXPLORER.utils.isScrolledIntoView($(this))||a.scrollWindow($(this))}).on("up",function(){var b=$(this).prev().prev();0<b.length&&!EXPLORER.utils.isScrolledIntoView(b)&&a.scrollWindow(b)});
this.results.table({idprefix:"co-",persist:"persist"})}};return{init:function(){c.init()}}}();
EXPLORER.details=function(){var c={init:function(){$("#dwc_table").length&&this.loadEvents()},loadEvents:function(){$("#dwc_table_toggle").on("click",function(a){a.preventDefault();$("tr.unused").toggle()})},setupSingleOccurrenceMap:function(a,b,c,e){b&&c?(b=new google.maps.LatLng(b,c),a=new google.maps.Map($("#"+a)[0],{center:b,zoom:12,scaleControl:!0,mapTypeId:google.maps.MapTypeId.TERRAIN,mapTypeControl:!0}),new google.maps.Marker({position:b,map:a}),new google.maps.Circle({map:a,center:b,radius:e,
strokeWeight:1})):$("#"+a).addClass("no_geo")}};return{init:function(){c.init()},setupSingleOccurrenceMap:function(a,b,d,e){c.setupSingleOccurrenceMap(a,b,d,e)}}}();